!function(a){Function.prototype.curry=Function.prototype.curry||function(){var a=this,b=Array.prototype.slice.call(arguments);return function(){return a.apply(this,b.concat(Array.prototype.slice.call(arguments)))}};var b=a.sour={};b.noop=function(){}}(window),function(a){a.__controller=function(b,c,d){if(c){if(b in d)throw new Error("Controller "+b+" already exists.");var e,f=[];return c.forEach?c.forEach(function(a){if("string"==typeof a)f.push(a);else if("function"==typeof a)return e=a,!1}):"function"==typeof c&&(e=c),d[b]={name:b,dependencies:f,constructor:e},a}return d[b]}}(window.sour),function(a){function b(b,d){var e=this,f=a.noop,g={},h={};e.CLASS="Module",e.name=b,e.dependencies=d,e.loaded=!1,e.config=function(a){return"function"==typeof a&&(f=a),e},e.dependency=function(a){var b;return a in h?b=h[a]:e.dependencies.some(function(d){return b=c[d].dependency(a),!!b}),b},e.run=function(){e.loaded||(e.config(),e.dependencies.forEach(function(a){if(!(a in c))throw new Error("Module "+a+" doesn't exist.");c[a].run()}),e.loaded=!0,$(function(){e.$elem=$("[module="+e.name+"]"),e.parse("body"),e.dependency("content_settings").parse($(".js-content").html())}))},e.service=function(b,c){if(b in h)throw new Error("A dependency named "+b+" already exists.");var d=a.__service(b,c),f=[];return d.dependencies.forEach(function(a){"module"===a?f.push(e):f.push(e.dependency(a))}),h[b]=d.constructor.apply(d,f),e},e.controller=function(b,c){return c?(a.__controller(b,c,g),e):g[b]},e.on=function(a,b){$(e).bind(a,b)},e.emit=function(a,b){$(e).trigger(a,b)},e.parse=function(b){a.__parse(e,b)};var i={};e.data=function(a,b){return"undefined"==typeof b?i[a]:(i[a]=b,void 0)}}var c={};a.module=function(a,d){return d=d||[],a in c||(c[a]=new b(a,d)),c[a]}}(window.sour),function(a){a.__parse=function(a,b){var c=$(b,a.$elem),d=c.parent();$("[ctrl]",d).each(function(){var b=$(this);if(!b.data("sour-ctrl")){var c=b.attr("ctrl"),d=a.controller(c);if(d){b.data("sour-ctrl",d);var e=[];d.dependencies.forEach(function(c){"$elem"===c?e.push(b):"module"===c?e.push(a):e.push(a.dependency(c))}),d.constructor.apply(d,e)}}})}}(window.sour),function(){sour.__service=function(a,b){var c,d=[];return b.forEach?b.forEach(function(a){if("string"==typeof a)d.push(a);else if("function"==typeof a)return c=a,!1}):"function"==typeof b&&(c=b),{name:a,dependencies:d,constructor:c}}}(window.sour),function(a){a.next_transit_data={}}(window);